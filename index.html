<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bobr Empire Premium</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg: #111;
            --card: #1c1c1e;
            --accent: #e67e22;
            --gold: #f1c40f;
            --green: #27ae60;
        }
        body {
            font-family: 'SF Pro Display', -apple-system, sans-serif;
            background: var(--bg);
            color: white;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
        }
        .header {
            width: 100%;
            padding: 20px;
            background: var(--card);
            border-bottom: 2px solid #333;
            text-align: center;
            box-sizing: border-box;
        }
        .balance-container {
            font-size: 48px;
            font-weight: 800;
            color: var(--gold);
            margin: 10px 0;
            text-shadow: 0 0 20px rgba(241, 196, 15, 0.3);
        }
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            width: 90%;
            margin-top: 15px;
        }
        .stat-item {
            background: #2c2c2e;
            padding: 10px;
            border-radius: 12px;
            font-size: 12px;
            color: #aaa;
        }
        .stat-value { color: white; font-weight: bold; font-size: 16px; }

        .click-zone {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 0;
        }
        .bobr-btn {
            width: 220px;
            height: 220px;
            background: radial-gradient(circle, #e67e22 0%, #d35400 100%);
            border-radius: 50%;
            border: 8px solid #333;
            font-size: 100px;
            cursor: pointer;
            box-shadow: 0 0 50px rgba(230, 126, 34, 0.2);
            transition: transform 0.05s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .bobr-btn:active { transform: scale(0.92); }

        .energy-bar {
            width: 80%;
            height: 12px;
            background: #333;
            border-radius: 6px;
            margin-top: 20px;
            overflow: hidden;
        }
        .energy-fill {
            height: 100%;
            background: linear-gradient(90deg, #f1c40f, #e67e22);
            width: 100%;
            transition: width 0.3s;
        }

        .menu-grid {
            width: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            padding: 20px;
            box-sizing: border-box;
            background: var(--card);
            border-radius: 30px 30px 0 0;
        }
        .menu-card {
            background: #2c2c2e;
            padding: 15px;
            border-radius: 18px;
            text-align: left;
            border: 1px solid #3d3d3f;
        }
        .menu-card h4 { margin: 0; font-size: 14px; color: #888; }
        .menu-card .price { font-size: 16px; color: var(--green); font-weight: bold; margin-top: 5px; }
        
        .promo-section {
            width: 90%;
            margin: 20px 0;
            display: flex;
            gap: 10px;
        }
        .promo-input {
            flex-grow: 1;
            background: #2c2c2e;
            border: 1px solid #444;
            border-radius: 10px;
            padding: 10px;
            color: white;
        }
        .promo-btn {
            background: var(--accent);
            border: none;
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="header">
        <div id="player-name" style="font-size: 14px; opacity: 0.7;">–ë–û–ë–ï–†-–ú–ê–ô–ù–ï–†</div>
        <div class="balance-container"><span id="balance">0</span> ü¶´</div>
        <div class="stats-grid">
            <div class="stat-item">–°–ò–õ–ê –ì–†–´–ó–ê<br><span class="stat-value" id="per-click">1</span></div>
            <div class="stat-item">–ü–ê–°–°–ò–í–ù–´–ô –î–û–•–û–î<br><span class="stat-value" id="per-sec">0</span>/—Å–µ–∫</div>
        </div>
    </div>

    <div class="click-zone">
        <button class="bobr-btn" onclick="mine()">ü¶´</button>
        <div class="energy-bar"><div class="energy-fill" id="energy-fill"></div></div>
        <p style="font-size: 12px; color: #666; margin-top: 10px;">–≠–ù–ï–†–ì–ò–Ø: <span id="energy-text">1000/1000</span></p>
    </div>

    <div class="promo-section">
        <input type="text" id="promo-input" class="promo-input" placeholder="–ö–æ–¥ –∏–∑ —á–∞—Ç–∞...">
        <button class="promo-btn" onclick="checkPromo()">OK</button>
    </div>

    <div class="menu-grid">
        <div class="menu-card" onclick="upgrade('click')">
            <h4>–û–°–¢–†–´–ï –ó–£–ë–´</h4>
            <div class="price" id="click-price">100 ü¶´</div>
            <div style="font-size: 10px; color: #666;">+1 –∫ –∫–ª–∏–∫—É</div>
        </div>
        <div class="menu-card" onclick="upgrade('auto')">
            <h4>–õ–ï–°–û–ü–ò–õ–ö–ê</h4>
            <div class="price" id="auto-price">500 ü¶´</div>
            <div style="font-size: 10px; color: #666;">+2/—Å–µ–∫ –ø–∞—Å—Å–∏–≤–Ω–æ</div>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let state = JSON.parse(localStorage.getItem('bobr_pro_state')) || {
            coins: 0,
            clickPower: 1,
            autoIncome: 0,
            energy: 1000,
            maxEnergy: 1000,
            clickCost: 100,
            autoCost: 500
        };

        function updateUI() {
            document.getElementById('balance').innerText = Math.floor(state.coins);
            document.getElementById('per-click').innerText = state.clickPower;
            document.getElementById('per-sec').innerText = state.autoIncome;
            document.getElementById('energy-text').innerText = `${Math.floor(state.energy)}/${state.maxEnergy}`;
            document.getElementById('energy-fill').style.width = (state.energy / state.maxEnergy * 100) + '%';
            document.getElementById('click-price').innerText = `${state.clickCost} ü¶´`;
            document.getElementById('auto-price').innerText = `${state.autoCost} ü¶´`;
            
            if (tg.initDataUnsafe.user) {
                document.getElementById('player-name').innerText = tg.initDataUnsafe.user.first_name.toUpperCase();
            }
        }

        function mine() {
            if (state.energy >= 1) {
                state.coins += state.clickPower;
                state.energy -= 1;
                save();
                updateUI();
                if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('light');
            } else {
                tg.showAlert("–ë–æ–±–µ—Ä —É—Å—Ç–∞–ª! –ù—É–∂–µ–Ω –æ—Ç–¥—ã—Ö.");
            }
        }

        function upgrade(type) {
            if (type === 'click' && state.coins >= state.clickCost) {
                state.coins -= state.clickCost;
                state.clickPower += 1;
                state.clickCost = Math.floor(state.clickCost * 1.5);
                tg.showAlert("–ó—É–±—ã —Å—Ç–∞–ª–∏ –æ—Å—Ç—Ä–µ–µ!");
            } else if (type === 'auto' && state.coins >= state.autoCost) {
                state.coins -= state.autoCost;
                state.autoIncome += 2;
                state.autoCost = Math.floor(state.autoCost * 1.6);
                tg.showAlert("–õ–µ—Å–æ–ø–∏–ª–∫–∞ –∑–∞–ø—É—â–µ–Ω–∞!");
            }
            save();
            updateUI();
        }

        function checkPromo() {
            const code = document.getElementById('promo-input').value.toUpperCase();
            if (code === 'KAMBULYATOR') {
                state.coins += 5000;
                tg.showAlert("üëë –°–ø–µ—Ü-–∫–æ–¥ –ø—Ä–∏–Ω—è—Ç! +5000 ü¶´");
                document.getElementById('promo-input').value = '';
            } else if (code === 'BOBR') {
                state.coins += 1000;
                tg.showAlert("–ì—Ä—ã–∑—å! +1000 –º–æ–Ω–µ—Ç");
                document.getElementById('promo-input').value = '';
            }
            save();
            updateUI();
        }

        function save() {
            localStorage.setItem('bobr_pro_state', JSON.stringify(state));
        }

        // –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥ –∏ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–Ω–µ—Ä–≥–∏–∏
        setInterval(() => {
            state.coins += state.autoIncome / 10;
            if (state.energy < state.maxEnergy) state.energy += 0.5;
            updateUI();
        }, 100);

        updateUI();
    </script>
</body>
</html>
