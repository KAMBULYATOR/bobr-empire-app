<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bobr Empire Premium</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg: #000;
            --card: #1c1c1e;
            --accent: #e67e22;
            --gold: #f1c40f;
            --green: #2ecc71;
            --text-main: #ffffff;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
        }

        /* –≠–ö–†–ê–ù –ü–†–ò–í–ï–¢–°–¢–í–ò–Ø –ò –ö–ê–ü–ß–ê */
        #auth-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .captcha-box {
            background: var(--card);
            padding: 20px;
            border-radius: 20px;
            border: 1px solid #333;
            margin-top: 20px;
        }
        .captcha-btns { display: flex; gap: 15px; margin-top: 15px; }
        .captcha-btn { 
            font-size: 30px; background: #2c2c2e; border: none; 
            padding: 10px; border-radius: 12px; cursor: pointer; 
        }

        /* –ù–ò–ñ–ù–Ø–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø */
        .bottom-nav {
            position: fixed;
            bottom: 0; width: 100%;
            background: var(--card);
            display: flex;
            justify-content: space-around;
            padding: 15px 0 30px 0;
            border-top: 1px solid #333;
            z-index: 100;
        }
        .nav-item {
            background: none; border: none; color: #8e8e93;
            font-size: 12px; font-weight: bold; text-transform: uppercase;
        }
        .nav-item.active { color: var(--accent); }

        /* –ö–û–ù–¢–ï–ù–¢ */
        .page { display: none; height: 100vh; padding: 20px; box-sizing: border-box; overflow-y: auto; padding-bottom: 120px; }
        .page.active { display: flex; flex-direction: column; align-items: center; }

        /* –ò–ì–†–ê */
        .balance-num { font-size: 50px; font-weight: 800; color: var(--gold); margin: 20px 0; }
        .clicker-btn {
            width: 220px; height: 220px;
            background: radial-gradient(circle, #e67e22, #d35400);
            border-radius: 50%; border: 8px solid #2c2c2e;
            font-size: 90px; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 40px rgba(230, 126, 34, 0.3);
            margin: 30px 0;
        }
        .clicker-btn:active { transform: scale(0.95); }

        /* –ü–†–û–§–ò–õ–¨ –ò –ö–ù–û–ü–ö–ê –ß–ê–¢–ê */
        .card { width: 100%; background: var(--card); border-radius: 20px; padding: 20px; margin-bottom: 15px; box-sizing: border-box; }
        .chat-btn {
            background: #3498db; color: white; border: none; width: 100%;
            padding: 15px; border-radius: 15px; font-weight: bold; font-size: 16px;
            cursor: pointer; text-decoration: none; display: block; text-align: center;
        }
        .avatar { width: 80px; height: 80px; background: var(--accent); border-radius: 50%; margin: 0 auto 10px; font-size: 40px; display: flex; align-items: center; justify-content: center; border: 3px solid var(--gold); overflow: hidden; }
        .avatar img { width: 100%; height: 100%; object-fit: cover; }
    </style>
</head>
<body>

    <div id="auth-screen">
        <h1 style="color: var(--accent);">BOBR EMPIRE</h1>
        <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–µ–º—å—é!</p>
        <div class="captcha-box">
            <div>–ù–∞–π–¥–∏ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –ë–æ–±—Ä–∞:</div>
            <div class="captcha-btns">
                <button class="captcha-btn" onclick="alert('–≠—Ç–æ –∫—Ä–æ–ª–∏–∫!')">üê∞</button>
                <button class="captcha-btn" onclick="login()">ü¶´</button>
                <button class="captcha-btn" onclick="alert('–≠—Ç–æ –∫–æ—Ç–∏–∫!')">üê±</button>
            </div>
        </div>
    </div>

    <main id="game-page" class="page active">
        <div id="u-name-header" style="opacity: 0.6; letter-spacing: 2px;">–ë–û–ë–ï–†</div>
        <div class="balance-num"><span id="balance">0</span></div>
        
        <div class="clicker-btn" onclick="mine()">ü™µ</div>
        
        <div class="card" style="display: flex; justify-content: space-around;">
            <div>–ö–õ–ò–ö: <b id="p-click">1</b></div>
            <div>–û–§–§–õ–ê–ô–ù: <b id="p-auto">0</b></div>
        </div>
    </main>

    <main id="profile-page" class="page">
        <div class="card">
            <div class="avatar" id="avatar">ü¶´</div>
            <h2 id="full-name" style="margin: 5px 0;">Kambulyator</h2>
            <div style="color: var(--gold); font-size: 14px;">–°–¢–ê–¢–£–°: –õ–ï–ì–ï–ù–î–ê</div>
        </div>

        <div class="card">
            <h3 style="margin-top:0;">–°–û–¶–ò–ê–õ–¨–ù–´–ï –°–ï–¢–ò</h3>
            <a href="https://t.me/+fLattD_e5UdlNDUy" target="_blank" class="chat-btn">üì¢ –ü–ï–†–ï–ô–¢–ò –í –ß–ê–¢</a>
        </div>

        <div class="card">
            <h4>–ò–ù–§–û</h4>
            <div style="font-size: 12px; color: #8e8e93;">
                ID –ê–∫–∫–∞—É–Ω—Ç–∞: <span id="u-id">---</span><br>
                –í–µ—Ä—Å–∏—è: 2.0 Premium
            </div>
        </div>
    </main>

    <nav class="bottom-nav">
        <button class="nav-item active" onclick="showPage('game-page', this)">–ò–ì–†–ê</button>
        <button class="nav-item" onclick="showPage('profile-page', this)">–ü–†–û–§–ò–õ–¨</button>
    </nav>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();

        let state = JSON.parse(localStorage.getItem('bobr_v4_state')) || {
            coins: 0, click: 1, auto: 0
        };

        function login() {
            document.getElementById('auth-screen').style.display = 'none';
            tg.HapticFeedback.notificationOccurred('success');
        }

        function showPage(id, btn) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            btn.classList.add('active');
            tg.HapticFeedback.selectionChanged();
        }

        function updateUI() {
            document.getElementById('balance').innerText = Math.floor(state.coins).toLocaleString();
            document.getElementById('p-click').innerText = state.click;
            document.getElementById('p-auto').innerText = state.auto;

            if (tg.initDataUnsafe.user) {
                const u = tg.initDataUnsafe.user;
                document.getElementById('u-name-header').innerText = u.first_name.toUpperCase();
                document.getElementById('full-name').innerText = u.first_name + (u.last_name ? ' ' + u.last_name : '');
                document.getElementById('u-id').innerText = u.id;
                if(u.photo_url) document.getElementById('avatar').innerHTML = `<img src="${u.photo_url}">`;
            }
        }

        function mine() {
            state.coins += state.click;
            updateUI();
            save();
            tg.HapticFeedback.impactOccurred('medium');
        }

        function save() { localStorage.setItem('bobr_v4_state', JSON.stringify(state)); }

        // –≠–º—É–ª—è—Ü–∏—è –ø–∞—Å—Å–∏–≤–Ω–æ–≥–æ –¥–æ—Ö–æ–¥–∞
        setInterval(() => {
            if(state.auto > 0) {
                state.coins += state.auto / 10;
                updateUI();
            }
        }, 100);

        updateUI();
    </script>
</body>
</html>
